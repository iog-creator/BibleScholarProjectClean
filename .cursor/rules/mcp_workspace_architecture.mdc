---
description: 
globs: 
alwaysApply: false
---
# MCP Workspace Architecture Rules

## ğŸ¯ **CORE PRINCIPLE**
The MCP server must be **WORKSPACE-UNIVERSAL** and **PROJECT-AGNOSTIC** to work with any project dropped into the CursorMCPWorkspace folder.

## ğŸ“ **CORRECT ARCHITECTURE**

```
CursorMCPWorkspace/                    # ğŸŸ¢ WORKSPACE ROOT
â”œâ”€â”€ mcp_universal_operations.py        # ğŸŸ¢ UNIVERSAL OPERATIONS (WORKSPACE LEVEL)
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ mcp_server_refactored.py      # ğŸŸ¢ UNIVERSAL MCP SERVER
â”œâ”€â”€ .cursor/
â”‚   â””â”€â”€ mcp.json                      # ğŸŸ¢ MCP CONFIGURATION
â”œâ”€â”€ BibleScholarLangChain/             # ğŸŸ¢ PROJECT 1 (uses workspace MCP)
â”œâ”€â”€ AnyOtherProject/                   # ğŸŸ¢ PROJECT 2 (uses workspace MCP)
â””â”€â”€ archive/                          # ğŸ”´ ARCHIVED PROJECTS
```

## âŒ **INCORRECT ARCHITECTURE**
```
CursorMCPWorkspace/
â”œâ”€â”€ BibleScholarLangChain/
â”‚   â””â”€â”€ mcp_universal_operations.py   # âŒ PROJECT-SPECIFIC (WRONG!)
â””â”€â”€ scripts/
    â””â”€â”€ mcp_server_refactored.py      # âŒ IMPORTS FROM PROJECT (WRONG!)
```

## ğŸ”§ **IMPLEMENTATION RULES**

### **1. MCP Operations Location**
- âœ… **MUST BE**: `CursorMCPWorkspace/mcp_universal_operations.py`
- âŒ **NEVER**: Inside any specific project folder
- âŒ **NEVER**: Duplicated across projects

### **2. MCP Server Import**
```python
# âœ… CORRECT: Import from workspace root
import sys
import os
sys.path.insert(0, os.path.dirname(__file__))  # Workspace root
from mcp_universal_operations import execute_operation

# âŒ WRONG: Import from specific project
sys.path.insert(0, os.path.join(os.path.dirname(__file__), '..', 'BibleScholarLangChain'))
```

### **3. MCP Configuration**
```json
{
  "mcpServers": {
    "bible-scholar-mcp": {
      "command": "python.exe",
      "args": ["scripts/mcp_server_refactored.py", "--mcp"],
      "cwd": "C:\\...\\CursorMCPWorkspace",
      "env": {
        "PYTHONPATH": "C:\\...\\CursorMCPWorkspace"
      }
    }
  }
}
```

## ğŸ¯ **UNIVERSAL DESIGN PRINCIPLES**

### **Database Agnostic**
- Support multiple database connections
- Auto-detect project-specific schemas
- Fallback to generic operations

### **Project Agnostic**
- No hardcoded project paths
- Dynamic project detection
- Universal operation patterns

### **Configuration Flexible**
- Environment-based configuration
- Project-specific overrides
- Workspace-level defaults

## ğŸš¨ **ENFORCEMENT RULES**

### **Before Any MCP Changes**
1. âœ… Verify operations file is at workspace root
2. âœ… Ensure server imports from workspace root
3. âœ… Test with multiple projects
4. âŒ Never tie MCP to specific project

### **File Movement Rules**
- âœ… Move project-specific MCP files to workspace root
- âœ… Update all import paths to workspace root
- âœ… Remove duplicate MCP implementations
- âŒ Never create project-specific MCP servers

## ğŸ“Š **SUCCESS CRITERIA**
- âœ… Single `mcp_universal_operations.py` at workspace root
- âœ… MCP server works with any project in workspace
- âœ… No project-specific MCP dependencies
- âœ… Easy to add new projects without MCP changes
- âœ… Universal operations work across all project types

## ğŸ”„ **MIGRATION STEPS**
1. Move MCP operations to workspace root
2. Update server imports to workspace root
3. Remove project-specific MCP files
4. Test with multiple projects
5. Verify universal functionality


